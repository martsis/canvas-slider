!function(t){var e={};function i(n){if(e[n])return e[n].exports;var h=e[n]={i:n,l:!1,exports:{}};return t[n].call(h.exports,h,h.exports,i),h.l=!0,h.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)i.d(n,h,function(e){return t[e]}.bind(null,h));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return d}));i(1);function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function t(e){var i=e.width,n=e.height,h=e.blur;a(this,t),this.width=i,this.height=void 0!==n?n:i,this.blur=h,this.data=[];for(var s=(this.width-this.width%2)/2,r=(this.height-this.height%2)/2,d=s<r?s:r,o=0;o<this.width;o++){this.data[o]=[];for(var u=0;u<this.height;u++){var c=Math.sqrt(Math.pow(o-s,2)+Math.pow(u-r,2));c<=d?c>d-this.blur?this.data[o][u]=(c-(d-this.blur))/this.blur*255:this.data[o][u]=0:this.data[o][u]=255}}},r=function(){function t(e){var i=this,n=e.url,h=e.width,s=e.height,r=e.pattern,d=e.drawn;a(this,t),this.url=n,this.image=new Image,this.image.crossOrigin="anonymous",this.image.src=this.url,this._mouseDownState=!1,this.pattern=r,this._backup,this.drawn=void 0!==d&&d,this.canvas=document.createElement("canvas"),this._ctx=this.canvas.getContext("2d"),this.image.addEventListener("load",(function(t){i.width=void 0!==h?h:t.target.width,i.height=void 0!==s?s:t.target.height,i.canvas.height=i.height,i.canvas.width=i.width;var e=i.width/i.height;if(t.target.width/t.target.height>e){var n=-(t.target.width-t.target.height*e)/2*(i.height/t.target.height),a=t.target.width*(i.height/t.target.height);i._ctx.drawImage(t.target,n,0,a,i.height)}else{var r=-(t.target.height-i.height*(t.target.width/i.width))/2,d=t.target.height*(i.width/t.target.width);i._ctx.drawImage(t.target,0,r,i.width,d)}i.save()})),this.canvas.addEventListener("mousedown",(function(t){i.drawn&&(i._mouseDownState=!0,i.draw(t.offsetX,t.offsetY))})),this.canvas.addEventListener("mouseup",(function(){i.drawn&&(i._mouseDownState=!1)})),this.canvas.addEventListener("mousemove",(function(t){i._mouseDownState&&i.drawn&&i.draw(t.offsetX,t.offsetY)}))}return h(t,[{key:"save",value:function(){this._backup=this._ctx.getImageData(0,0,this.width,this.height)}},{key:"restore",value:function(){this._ctx.putImageData(this._backup,0,0)}},{key:"resize",value:function(){this.canvas.width}},{key:"draw",value:function(t,e){for(var i=this.width/this.canvas.offsetWidth*t,n=this.height/this.canvas.offsetHeight*e,h=i-this.pattern.width/2,a=n-this.pattern.height/2,s=this._ctx.getImageData(h,a,this.pattern.width,this.pattern.height),r=0,d=3;d<s.data.length;d+=4){var o=r%this.pattern.width,u=(r-r%this.pattern.height)/this.pattern.width;r++,s.data[d]>this.pattern.data[u][o]&&(s.data[d]=this.pattern.data[u][o])}this._ctx.putImageData(s,h,a)}}]),t}(),d=function(){function t(e){var i=this,n=e.container,h=e.width,d=e.height,o=e.slides,u=e.pattern,c=e.nextBtn,l=e.prevBtn,f=e.drawn,v=e.onNext,g=e.onPrev;a(this,t),void 0!==n?(this._element=document.querySelector(n),this.animating=!1,void 0!==h&&(this.width=h),void 0!==d&&(this.height=d),void 0!==c&&(this.nextBtn=document.querySelector(c)),void 0!==l&&(this.prevBtn=document.querySelector(l)),void 0!==f&&(this.drawn=f),void 0!==v&&(this.onNext=v),void 0!==g&&(this.onPrev=g),this._pattern=new s(u),this.slides=[],this.currentIndex=0,this.nextIndex=this.currentIndex+1,this._slideshowContainer=document.createElement("div"),this._slideshowContainer.className="canvasSlideshow-container",this._element.append(this._slideshowContainer),o.forEach((function(t){var e=new r({url:t,width:i.width,height:i.height,pattern:i._pattern,drawn:i.drawn});e.image.addEventListener("load",(function(){i.resize()}));var n=document.createElement("div");n.className="canvasSlideshow-slide",n.append(e.canvas),i.slides.push({slide:e,container:n})})),this.slides.forEach((function(t){i._slideshowContainer.append(t.container)})),this._indexUpdateStart(),this._indexUpdateFinish(),window.addEventListener("resize",(function(){i.resize()})),this.nextBtn&&this.nextBtn.addEventListener("click",(function(t){t.preventDefault(),i.next()})),this.prevBtn&&this.prevBtn.addEventListener("click",(function(t){t.preventDefault(),i.prev()}))):console.error('Param "container" is undefined')}return h(t,[{key:"_indexUpdateStart",value:function(){var t=this;this.slides.forEach((function(e,i){i==t.currentIndex&&(e.container.style.zIndex=1e3),i==t.nextIndex&&(e.container.style.zIndex=990)}))}},{key:"_indexUpdateFinish",value:function(){var t=this;this.slides.forEach((function(e,i){i!=t.currentIndex&&i!=t.nextIndex&&(e.container.style.zIndex=0)}))}},{key:"resize",value:function(){this._containerHeight=this.slides[0].container.offsetHeight,this._element.style.height="".concat(this._containerHeight,"px")}},{key:"next",value:function(){this.animating||(this.onNext&&this.onNext(),this._nextStart(),this.animation(this.slides[this.currentIndex].slide))}},{key:"prev",value:function(){this.animating||(this.onPrev&&this.onPrev(),this._prevStart(),this.animation(this.slides[this.currentIndex].slide))}},{key:"_nextStart",value:function(){this.nextIndex=this.currentIndex,this.nextIndex++,this.nextIndex>=this.slides.length&&(this.nextIndex=0),this._indexUpdateStart()}},{key:"_prevStart",value:function(){this.nextIndex=this.currentIndex,this.nextIndex--,this.nextIndex<0&&(this.nextIndex=this.slides.length-1),this._indexUpdateStart()}},{key:"_prevFinish",value:function(){this.currentIndex--,this.currentIndex<0&&(this.currentIndex=this.slides.length-1),this._indexUpdateFinish(),this.slides.forEach((function(t){t.slide.restore()}))}},{key:"_nextFinish",value:function(){this.currentIndex++,this.currentIndex>=this.slides.length&&(this.currentIndex=0),this._indexUpdateFinish(),this.slides.forEach((function(t,e){t.slide.restore()}))}},{key:"animation",value:function(t,e,i){var n=this,h=this._pattern.width/2-this._pattern.blur,a=-h,s=t.width-h,r="down",d=0;this.animating=!0;var o=setInterval((function(){d>t.width/n._pattern.width*2&&(clearInterval(o),n.animating=!1,void 0===e?n._nextFinish():n._prevFinish()),t.draw(s/(n.width/t.canvas.offsetWidth),a/(n.height/t.canvas.offsetHeight)),"down"==r&&(a>t.height+h||s>t.width+n._pattern.width)&&(s-=n._pattern.width-2*n._pattern.blur,r="up",d++),"up"==r&&(a<-h||s<0)&&(s-=n._pattern.width-2*n._pattern.blur,r="down",d++),"down"==r&&(a+=t.height/20,s+=t.width/20),"up"==r&&(a-=t.height/20,s-=t.width/20)}),16)}}]),t}()},function(t,e,i){}]);
//# sourceMappingURL=canvas-slideshow.js.map